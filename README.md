# Финальный проект по курсу Otus DevOps

## How to start (develop mode)

Режим запуска только самого приложения для отладочных целей
в тестовом окружении с использованием **docker**.

Для предварительной настройки тестового окружения можно использовать
запуск docker-machine на локальном компьютере или в GCP согласно
инструкции из [каталога docker-lab](docker-lab/README.md).

После этого используется деплой из исходников через docker-compose
``` text
cd src
cp -n .env.example .env
docker-compose build
docker-compose up -d
```

После запуска контейнеров подключаемся на 8000 порт
* <http://localhost:8000> для локального хоста
* <http://ip-docker-machine:8000> для удалённого хоста

## How to start (normal mode)

Для развертывания приложения в полноценном режиме используется
два окружения с использованием ресурсов GCP:

* __stage__ для предварительных тестов перед запуском в продакт
* __prod__ основное рабочее окружение

### Шаг 1

Сборка образов ОС с установленным docker из шаблонов по инструкции
из [каталога packer](packer/README.md).

### Шаг 2

Подготовка ресурсов GCE по инструкции
из [каталога terraform](terraform/README.md).

Дополнительно в этой же инструкции описана процедура использования
remote storage в GCP для хранения tfstate файлов.

На этом шаге полностью развёртывается вся инфраструктура для
выбранного окружения

### Шаг 3

Деплой приложений с использованием ansible

## Основа для приложения

Используется готовое приложение, которое включает:

* метрики
* логи приложения
* unit-тесты

Исходный код приложения:

* <https://github.com/express42/search_engine_crawler>
* <https://github.com/express42/search_engine_ui>

Дано:

* простое микросервисное приложение
* база данных
* менеджер очередей сообщений
* Пример сайта для парсинга

## Требования к приложению

Список требований:

1. Автоматизированные процессы создания и управления платформой
   * Ресурсы GCP
   * Инфраструктура для CI/CD
   * Инфраструктура для сбора обратной связи
2. Использование практики IaC (Infrastructure as Code) для управления конфигурацией и инфраструктурой
3. Настроен процесс CI/CD
4. Все, что имеет отношение к проекту хранится в Git
5. Настроен процесс сбора обратной связи
   * Мониторинг (сбор метрик, алертинг, визуализация)
   * Логирование (опционально)
   * Трейсинг (опционально)
   * ChatOps (опционально)
6. Документация
   * README по работе с репозиторием
   * Описание приложения и его архитектуры
   * How to start?
   * CHANGELOG с описанием выполненной работы
   * Если работа в группе, то пункт включает автора изменений
